# http历史版本

## http 1.0 : Connection请求头

通过手动添加Connection: keep-alive　请求头实现tcp请求的持久化连接，避免多次三方握手节省了请求的时间．

> 但这个字段并非标准，所以存在兼容性问题．

## http 1.1 

### 特性

- 1.引入了持久连接（persistent connection),目前，对于同一个域名，大多数浏览器允许同时建立6个持久连接。

- 2.引入了管道机制（pipelining），即在同一个TCP连接里面，客户端可以同时发送多个请求。

- 3.分块传输（chunk）．添加请求或响应的头字段Transfer-Encoding: chunked

- 4.put,options等其他请求方式．

- 5. 无状态协议。每次请求都需要携带状态类信息如cookie,User Agent. 

### 优化

http 1.1 的缺点是同一持久化连接的多个请求同样需要服务器依次处理．因此同样存在阻塞．优化点可以围绕减少请求数量和多开持久化连接展开：

**减少请求数量**


**多开持久化连接**


## http 2

> 注意是http/2，不是http/2.0，因为标准委员会不打算再发布子版本了，下一个新版本将是 HTTP/3。

### 特性

1.二进制协议　

和http/1.1的请求头信息必须是文本，请求体可以是二进制数据而言。http/2无论是头信息或请求体都是二进制，统称为帧（frame）,其分别为头信息帧和数据帧。

可以定义其他的帧。HTTP/2 定义了近十种帧，为将来的高级应用打好了基础。

2.多工

HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应

3.数据流
- http/2中一个请求或回应所需要的数据称为数据流，其拥有独一无二的编号。
- 而一个数据流由多个数据包组成，每一个数据包都标记有其所属数据流对应的编号。
- http/2,tcp连接中数据包不按顺序传送，连续的数据包不一定属于同一个数据流即不属于同一个请求。
- 客户端发出的数据流，ID一律为奇数，服务器发出的，ID为偶数。
- 客户端还可以指定数据流的优先级。优先级越高，服务器就会越早回应。

4.HTTP/2 对这一点做了优化，引入了头信息压缩机制（header compression）
- 使用gzip和compress压缩头信
- 客户与服务端各自维护一个头信息表，其存储有对应的字段值。通过发送对应表索引号即实现状态持久

5.HTTP/2 允许服务器未经请求，主动向客户端发送资源，这叫做服务器推送（server push）。

### 优化

todo


## http 3 

待续...






